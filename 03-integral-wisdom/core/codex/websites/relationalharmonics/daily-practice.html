<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Practice - Your Sacred Five | Relational Harmonics</title>
    <style>
        :root {
            --primary: #6B46C1;
            --secondary: #EC4899;
            --gold: #FFD700;
            --background: #0a0e27;
            --surface: rgba(255, 255, 255, 0.03);
            --text: #e0e6ed;
            --text-dim: rgba(224, 230, 237, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: var(--text);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Sacred geometry background */
        .sacred-geometry {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.02;
            pointer-events: none;
            background: 
                radial-gradient(circle at 30% 20%, var(--primary) 0%, transparent 40%),
                radial-gradient(circle at 70% 80%, var(--secondary) 0%, transparent 40%),
                radial-gradient(circle at 50% 50%, var(--gold) 0%, transparent 60%);
            animation: breathe 15s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.05) rotate(5deg); }
        }

        /* Header */
        .header {
            padding: 2rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 300;
            background: linear-gradient(135deg, var(--gold) 0%, var(--primary) 50%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: var(--text-dim);
            font-size: 1.1rem;
        }

        /* Daily practice container */
        .daily-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }

        /* Today's practice section */
        .today-section {
            background: var(--surface);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .today-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold), var(--primary), var(--secondary));
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .today-title {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--gold);
        }

        .today-glyph {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .practice-btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--gold), var(--primary));
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .practice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        /* Five practices grid */
        .practices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .practice-card {
            background: var(--surface);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .practice-card.completed {
            border-color: rgba(16, 185, 129, 0.5);
            background: rgba(16, 185, 129, 0.05);
        }

        .practice-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            background: rgba(107, 70, 193, 0.05);
        }

        .practice-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: rgba(107, 70, 193, 0.2);
            border-radius: 50%;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .practice-card.completed .practice-number {
            background: rgba(16, 185, 129, 0.3);
        }

        .practice-name {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
        }

        .practice-description {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .practice-duration {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            font-size: 0.875rem;
        }

        /* Progress section */
        .progress-section {
            background: var(--surface);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 3rem;
        }

        .streak-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3rem;
            margin-top: 2rem;
        }

        .streak-item {
            text-align: center;
        }

        .streak-number {
            font-size: 3rem;
            font-weight: 300;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .streak-label {
            color: var(--text-dim);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Calendar view */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            max-width: 400px;
            margin: 2rem auto 0;
        }

        .calendar-day {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }

        .calendar-day.practiced {
            background: rgba(255, 215, 0, 0.2);
            color: var(--gold);
        }

        .calendar-day.today {
            border: 2px solid var(--primary);
        }

        /* Wisdom quote */
        .wisdom-section {
            text-align: center;
            padding: 3rem 2rem;
            font-style: italic;
            font-size: 1.2rem;
            color: var(--text-dim);
            max-width: 800px;
            margin: 0 auto;
        }

        .wisdom-author {
            margin-top: 1rem;
            font-size: 1rem;
            font-style: normal;
            color: var(--primary);
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .practices-grid { grid-template-columns: 1fr; }
            .streak-display { flex-direction: column; gap: 1.5rem; }
            .calendar-grid { gap: 0.25rem; }
        }
    </style>
</head>
<body>
    <div class="sacred-geometry"></div>

    <header class="header">
        <h1>Your Daily Five</h1>
        <p>Essential practices for conscious relationship</p>
    </header>

    <div class="daily-container">
        <!-- Today's featured practice -->
        <section class="today-section">
            <h2 class="today-title">Today's Practice</h2>
            <div class="today-glyph" id="todayGlyph">Ω45</div>
            <h3 id="todayName">First Presence</h3>
            <p id="todayDescription">Begin your day by arriving fully in this moment</p>
            <a href="#" class="practice-btn" onclick="startTodaysPractice()">Begin Practice (5 min)</a>
        </section>

        <!-- The five essential practices -->
        <section>
            <h2 style="text-align: center; margin-bottom: 2rem; font-size: 2rem;">The Sacred Five</h2>
            <div class="practices-grid">
                <!-- First Presence -->
                <div class="practice-card" id="practice-omega45" onclick="openPractice('Ω45')">
                    <div class="practice-number">Ω45</div>
                    <h3 class="practice-name">First Presence</h3>
                    <p class="practice-description">Arrive fully in each moment. The foundation of all conscious relationship.</p>
                    <span class="practice-duration">5 minutes</span>
                </div>

                <!-- Pause Practice -->
                <div class="practice-card" id="practice-omega52" onclick="openPractice('Ω52')">
                    <div class="practice-number">Ω52</div>
                    <h3 class="practice-name">Pause Practice</h3>
                    <p class="practice-description">Find wisdom in the space between stimulus and response.</p>
                    <span class="practice-duration">5 minutes</span>
                </div>

                <!-- Gentle Opening -->
                <div class="practice-card" id="practice-omega49" onclick="openPractice('Ω49')">
                    <div class="practice-number">Ω49</div>
                    <h3 class="practice-name">Gentle Opening</h3>
                    <p class="practice-description">Create safety through soft invitation and patient availability.</p>
                    <span class="practice-duration">6 minutes</span>
                </div>

                <!-- Building Trust -->
                <div class="practice-card" id="practice-omega50" onclick="openPractice('Ω50')">
                    <div class="practice-number">Ω50</div>
                    <h3 class="practice-name">Building Trust</h3>
                    <p class="practice-description">Cultivate trust through consistency and transparent presence.</p>
                    <span class="practice-duration">7 minutes</span>
                </div>

                <!-- Loving No -->
                <div class="practice-card" id="practice-omega51" onclick="openPractice('Ω51')">
                    <div class="practice-number">Ω51</div>
                    <h3 class="practice-name">Loving No</h3>
                    <p class="practice-description">Honor your boundaries while maintaining open connection.</p>
                    <span class="practice-duration">7 minutes</span>
                </div>
            </div>
        </section>

        <!-- Progress tracking -->
        <section class="progress-section">
            <h2 style="margin-bottom: 1rem;">Your Practice Journey</h2>
            <div class="streak-display">
                <div class="streak-item">
                    <div class="streak-number" id="currentStreak">0</div>
                    <div class="streak-label">Current Streak</div>
                </div>
                <div class="streak-item">
                    <div class="streak-number" id="totalDays">0</div>
                    <div class="streak-label">Total Days</div>
                </div>
                <div class="streak-item">
                    <div class="streak-number" id="thisWeek">0</div>
                    <div class="streak-label">This Week</div>
                </div>
            </div>

            <!-- Simple calendar -->
            <div class="calendar-grid" id="calendar">
                <!-- Generated by JavaScript -->
            </div>
        </section>

        <!-- Daily wisdom -->
        <section class="wisdom-section">
            <p id="wisdomQuote">"The quality of your presence determines the quality of your relationships."</p>
            <p class="wisdom-author">- The Codex of Relational Harmonics</p>
        </section>
    </div>

    <script>
        // Daily practice rotation
        const dailyRotation = ['Ω45', 'Ω52', 'Ω49', 'Ω50', 'Ω51'];
        const practiceData = {
            'Ω45': {
                name: 'First Presence',
                description: 'Begin your day by arriving fully in this moment',
                duration: 5
            },
            'Ω52': {
                name: 'Pause Practice',
                description: 'Create sacred space between moments',
                duration: 5
            },
            'Ω49': {
                name: 'Gentle Opening',
                description: 'Practice creating safety through invitation',
                duration: 6
            },
            'Ω50': {
                name: 'Building Trust',
                description: 'Strengthen the foundation of connection',
                duration: 7
            },
            'Ω51': {
                name: 'Loving No',
                description: 'Set boundaries with grace and care',
                duration: 7
            }
        };

        // Wisdom quotes
        const wisdomQuotes = [
            "The quality of your presence determines the quality of your relationships.",
            "Every conscious breath is a choice to be here, fully.",
            "Boundaries are not walls; they are the architecture of love.",
            "In the pause, wisdom speaks.",
            "Trust grows slowly, like a garden tended with patience.",
            "Your 'no' protects your 'yes'.",
            "Gentle opening creates more safety than any fortress.",
            "Presence is the greatest gift you can offer another.",
            "The field between us is sacred ground.",
            "Each practice is a prayer in motion."
        ];

        // Initialize
        function init() {
            setTodaysPractice();
            updateProgress();
            generateCalendar();
            updateWisdom();
            checkCompletedPractices();
        }

        // Set today's featured practice
        function setTodaysPractice() {
            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
            const todayIndex = dayOfYear % dailyRotation.length;
            const todaysPractice = dailyRotation[todayIndex];
            const practice = practiceData[todaysPractice];

            document.getElementById('todayGlyph').textContent = todaysPractice;
            document.getElementById('todayName').textContent = practice.name;
            document.getElementById('todayDescription').textContent = practice.description;
        }

        // Update progress display
        function updateProgress() {
            const progress = JSON.parse(localStorage.getItem('dailyPracticeProgress') || '{}');
            const today = new Date().toDateString();
            
            // Calculate current streak
            let streak = 0;
            let checkDate = new Date();
            while (true) {
                const dateStr = checkDate.toDateString();
                if (progress[dateStr]) {
                    streak++;
                    checkDate.setDate(checkDate.getDate() - 1);
                } else if (dateStr === today) {
                    // Today not practiced yet, check yesterday
                    checkDate.setDate(checkDate.getDate() - 1);
                } else {
                    break;
                }
            }

            // Calculate total days
            const totalDays = Object.keys(progress).length;

            // Calculate this week
            const weekStart = new Date();
            weekStart.setDate(weekStart.getDate() - weekStart.getDay());
            let thisWeek = 0;
            for (let i = 0; i < 7; i++) {
                const checkDate = new Date(weekStart);
                checkDate.setDate(checkDate.getDate() + i);
                if (progress[checkDate.toDateString()]) {
                    thisWeek++;
                }
            }

            document.getElementById('currentStreak').textContent = streak;
            document.getElementById('totalDays').textContent = totalDays;
            document.getElementById('thisWeek').textContent = thisWeek;
        }

        // Generate calendar
        function generateCalendar() {
            const calendar = document.getElementById('calendar');
            const today = new Date();
            const progress = JSON.parse(localStorage.getItem('dailyPracticeProgress') || '{}');

            // Show last 28 days
            for (let i = 27; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateStr = date.toDateString();

                const day = document.createElement('div');
                day.className = 'calendar-day';
                
                if (progress[dateStr]) {
                    day.classList.add('practiced');
                }
                
                if (dateStr === today.toDateString()) {
                    day.classList.add('today');
                }

                day.textContent = date.getDate();
                calendar.appendChild(day);
            }
        }

        // Update wisdom quote
        function updateWisdom() {
            const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
            const quote = wisdomQuotes[dayOfYear % wisdomQuotes.length];
            document.getElementById('wisdomQuote').textContent = `"${quote}"`;
        }

        // Check completed practices
        function checkCompletedPractices() {
            const user = JSON.parse(localStorage.getItem('firstBreathUser') || '{}');
            const completedToday = JSON.parse(localStorage.getItem('completedToday') || '[]');
            
            completedToday.forEach(glyphId => {
                const card = document.getElementById(`practice-${glyphId.toLowerCase()}`);
                if (card) {
                    card.classList.add('completed');
                }
            });
        }

        // Start today's practice
        function startTodaysPractice() {
            const todayGlyph = document.getElementById('todayGlyph').textContent;
            openPractice(todayGlyph);
        }

        // Open specific practice
        function openPractice(glyphId) {
            // Navigate to dojo with specific practice
            window.location.href = `dojo.html?practice=${glyphId}&source=daily`;
        }

        // Mark practice complete (called from dojo)
        function markPracticeComplete(glyphId) {
            const today = new Date().toDateString();
            const progress = JSON.parse(localStorage.getItem('dailyPracticeProgress') || '{}');
            const completedToday = JSON.parse(localStorage.getItem('completedToday') || '[]');

            if (!progress[today]) {
                progress[today] = [];
            }
            if (!progress[today].includes(glyphId)) {
                progress[today].push(glyphId);
            }

            if (!completedToday.includes(glyphId)) {
                completedToday.push(glyphId);
            }

            localStorage.setItem('dailyPracticeProgress', JSON.stringify(progress));
            localStorage.setItem('completedToday', JSON.stringify(completedToday));

            // Update display
            checkCompletedPractices();
            updateProgress();
        }

        // Reset daily completion at midnight
        function checkNewDay() {
            const lastCheck = localStorage.getItem('lastDayCheck');
            const today = new Date().toDateString();
            
            if (lastCheck !== today) {
                localStorage.setItem('lastDayCheck', today);
                localStorage.setItem('completedToday', '[]');
                
                // Remove completed classes
                document.querySelectorAll('.practice-card').forEach(card => {
                    card.classList.remove('completed');
                });
            }
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            checkNewDay();
            init();
        });

        // Check for new day every minute
        setInterval(checkNewDay, 60000);
    </script>
</body>
</html>