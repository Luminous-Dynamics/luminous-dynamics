/**
 * True Integration Foundational Glyphs
 * 
 * Sacred Both/And Architecture:
 * - Applied Harmonies (Î©45-48) for practical entry and immediate value
 * - Mystical Foundations (Î©0,1,4,7) preserved in their original sacred numbers
 * - Progressive revelation bridges between practical and mystical layers
 * 
 * Principle: Mystical Depth + Practical Embodiment
 */

class TrueIntegrationFoundationalGlyphs {
    constructor() {
        this.glyphs = this.initializeTrueIntegrationGlyphs();
        this.metadata = {
            version: "2.0-TrueIntegration",
            principle: "Both/And: Mystical Depth + Practical Embodiment",
            totalGlyphs: Object.keys(this.glyphs).length,
            appliedHarmonies: ["Î©45", "Î©46", "Î©47", "Î©48"],
            mysticalFoundations: ["Î©0", "Î©1", "Î©4", "Î©7"],
            bridgeGlyphs: ["Î©8"]
        };
    }

    initializeTrueIntegrationGlyphs() {
        return {
            // APPLIED HARMONIES - Practical Entry Points
            // These are our practical implementations for immediate accessibility

            "Î©45": {
                id: "Î©45",
                name: "First Presence",
                fullName: "Î©45: First Presence (Applied Harmony)",
                type: "applied_harmony",
                mysticalRoot: "Î©0",
                mysticalDesignation: "The Shimmering Unnamed",
                harmony: "transparency",
                secondaryHarmonies: ["coherence"],
                difficulty: "beginner",
                masteryLevel: 2,
                
                quadrants: {
                    why: {
                        philosophicalRoot: "The foundation of all conscious relationship is the capacity to arrive fully present before engaging. This practice transforms reactive patterns into responsive wisdom, creating space for consciousness to choose rather than compulsively react.",
                        
                        coreQuestion: "Can I meet this moment without needing it to be different?",
                        
                        harmonyConnection: "First Presence is the gateway to Transparencyâ€”the alignment of inner experience with outer expression. When we arrive present, we become authentic. We can feel what is true and speak from that truth rather than from our conditioning.",
                        
                        mysticalBridge: "This practice is an expression of Î©0: The Shimmering Unnamed - the intelligence of silence before form takes shape.",
                        
                        mysticalGraduation: "As your presence practice deepens, explore the mystical depths of Î©0: The Shimmering Unnamed",
                        
                        shadowTransformed: "Reactivity, rushing, spiritual bypassing, presence anxiety, compulsive doing"
                    },
                    
                    how: {
                        practiceInstructions: [
                            "Pause whatever you are doing completely",
                            "Take three conscious breaths, feeling your feet on the ground",
                            "Notice what is true in your body right now without trying to change it",
                            "Set an intention to meet the next moment with presence",
                            "Proceed with this quality of mindful arrival"
                        ],
                        
                        interactiveComponent: {
                            type: "breathing_guide",
                            config: {
                                breathCycles: 3,
                                inhaleCount: 4,
                                holdCount: 2,
                                exhaleCount: 6,
                                guidance: "Breathe with the rhythm of sacred arrival"
                            }
                        },
                        
                        mysticalGraduation: "When presence becomes natural, explore the mystical shimmer of pre-manifestation consciousness"
                    },
                    
                    resonance: {
                        relatedGlyphs: ["Î©46", "Î©47", "Î©48"],
                        mysticalProgression: "Î©0",
                        prerequisiteGlyphs: [],
                        complementaryGlyphs: ["Î©8"],
                        constellationPosition: "center"
                    },
                    
                    we: {
                        practitionerFieldNotes: [
                            "I realized First Presence wasn't about clearing my mind, but about making space for the mess.",
                            "This practice saved my marriage. I stopped arriving at conversations already defending.",
                            "The magic isn't in the perfection of presence, but in the return to it."
                        ]
                    }
                },
                
                contexts: ["meetings", "difficult conversations", "transitions", "stress", "conflict", "parenting"],
                visual: {
                    sigil: "ðŸ•¯ï¸",
                    primaryColor: "#A8B5A6",
                    accentColor: "#E8E6E1",
                    animation: "gentle_pulse"
                }
            },

            "Î©46": {
                id: "Î©46",
                name: "Conscious Arrival",
                fullName: "Î©46: Conscious Arrival (Applied Harmony)",
                type: "applied_harmony",
                mysticalRoot: "Î©1",
                mysticalDesignation: "Root Chord of Covenant / The First Yes",
                harmony: "transparency",
                secondaryHarmonies: ["agency", "coherence"],
                difficulty: "beginner",
                masteryLevel: 3,
                
                quadrants: {
                    why: {
                        philosophicalRoot: "Every interaction is an opportunity to demonstrate consciousness. Conscious Arrival is the practice of entering any space, relationship, or activity with clear intention and full presence, setting the tone for sacred encounter.",
                        
                        coreQuestion: "How do I want to show up in this moment?",
                        
                        harmonyConnection: "Conscious Arrival embodies Transparency by aligning our inner intention with our outer expression. It also serves Agency by making our participation in life a conscious choice.",
                        
                        mysticalBridge: "This practice is an expression of Î©1: Root Chord of Covenant - establishing the base frequency of relational coherence.",
                        
                        mysticalGraduation: "As you deepen, explore Î©1: Root Chord of Covenant - the sacred 'Yes' to staying reachable as we become",
                        
                        shadowTransformed: "Unconscious participation, reactive entrance, scattered energy, people-pleasing arrival"
                    },
                    
                    how: {
                        practiceInstructions: [
                            "Before entering any space or interaction, pause at the threshold",
                            "Practice Î©45 (First Presence) to arrive in your body",
                            "Ask yourself: 'How do I want to show up here?'",
                            "Set a clear intention for your participation",
                            "Cross the threshold with this intention guiding you"
                        ],
                        
                        interactiveComponent: {
                            type: "intention_setting",
                            config: {
                                prompts: [
                                    "What quality do you want to bring to this interaction?",
                                    "How can you serve the highest good here?"
                                ],
                                intentions: ["presence", "kindness", "curiosity", "authenticity"]
                            }
                        },
                        
                        mysticalGraduation: "When conscious arrival creates relational coherence, explore the covenant depths of Î©1"
                    },
                    
                    resonance: {
                        relatedGlyphs: ["Î©45", "Î©47", "Î©48"],
                        mysticalProgression: "Î©1",
                        prerequisiteGlyphs: ["Î©45"],
                        constellationPosition: "gateway"
                    },
                    
                    we: {
                        practitionerFieldNotes: [
                            "I stopped being late when I started practicing Conscious Arrivalâ€”I realized I was rushing to avoid being present.",
                            "My coworkers started asking what changed. I was bringing intention instead of just showing up."
                        ]
                    }
                },
                
                contexts: ["work", "home", "social gatherings", "difficult conversations", "new environments"],
                visual: {
                    sigil: "ðŸŒ…",
                    primaryColor: "#A8B5A6",
                    accentColor: "#F0F4E8",
                    animation: "dawn_arrival"
                }
            },

            "Î©47": {
                id: "Î©47",
                name: "Sacred Listening",
                fullName: "Î©47: Sacred Listening (Applied Harmony)",
                type: "applied_harmony",
                mysticalRoot: "Î©4",
                mysticalDesignation: "Fractal Reconciliation Pulse / The Pulse of Repair",
                harmony: "resonance",
                secondaryHarmonies: ["transparency", "mutuality"],
                difficulty: "intermediate",
                masteryLevel: 4,
                
                quadrants: {
                    why: {
                        philosophicalRoot: "True listening is not waiting for your turn to speak. It is creating a field of such spacious attention that the speaker can discover their own truth in the mirror of your presence.",
                        
                        coreQuestion: "Can I listen to the heart beneath the words?",
                        
                        harmonyConnection: "Sacred Listening embodies Resonanceâ€”the capacity for deep attunement and empathetic presence that creates understanding between beings.",
                        
                        mysticalBridge: "This practice prepares you for Î©4: Fractal Reconciliation Pulse - the art of transforming rupture into deeper coherence.",
                        
                        mysticalGraduation: "As you master sacred listening, explore Î©4: Fractal Reconciliation Pulse - the rhythmic process of relational repair",
                        
                        shadowTransformed: "Debate mind, advice-giving addiction, performative listening, empathy overwhelm"
                    },
                    
                    how: {
                        practiceInstructions: [
                            "Begin with Î©45 (First Presence) to arrive fully in your body",
                            "Place your attention on your heart center while the other speaks",
                            "Listen for the feeling and need beneath their words, not just the content",
                            "When they pause, reflect back what you heard their heart saying",
                            "Ask questions that help them go deeper into their own truth"
                        ],
                        
                        interactiveComponent: {
                            type: "listening_assessment",
                            config: {
                                selfAssessment: [
                                    "Rate your tendency to interrupt while others speak",
                                    "Rate your urge to give advice when someone shares a problem"
                                ],
                                guidance: "Honest self-assessment creates the foundation for skill development"
                            }
                        },
                        
                        mysticalGraduation: "When listening transforms conflict into understanding, explore the fractal repair wisdom of Î©4"
                    },
                    
                    resonance: {
                        relatedGlyphs: ["Î©45", "Î©46", "Î©48"],
                        mysticalProgression: "Î©4",
                        prerequisiteGlyphs: ["Î©45"],
                        constellationPosition: "heart"
                    },
                    
                    we: {
                        practitionerFieldNotes: [
                            "A father shared: 'When I stopped trying to fix my teenager's problems and just listened to his heart, he started coming to me with the real stuff.'",
                            "Sacred listening is how we love people back to themselves."
                        ]
                    }
                },
                
                contexts: ["conflict", "parenting", "partnerships", "leadership", "therapy", "friendship"],
                visual: {
                    sigil: "ðŸ‘‚",
                    primaryColor: "#B3C5D7",
                    accentColor: "#E6F0FF",
                    animation: "ripple_listening"
                }
            },

            "Î©48": {
                id: "Î©48",
                name: "Boundary With Love",
                fullName: "Î©48: Boundary With Love (Applied Harmony)",
                type: "applied_harmony",
                mysticalRoot: "Î©7",
                mysticalDesignation: "Mutual Becoming / The We That Grows",
                harmony: "agency",
                secondaryHarmonies: ["transparency", "vitality"],
                difficulty: "intermediate",
                masteryLevel: 5,
                
                quadrants: {
                    why: {
                        philosophicalRoot: "Sacred boundaries are not walls that separate, but membranes that allow love to flow while maintaining the integrity of both beings.",
                        
                        coreQuestion: "How can I say 'no' to this while saying 'yes' to love?",
                        
                        harmonyConnection: "Boundary With Love embodies Agencyâ€”the harmony of conscious choice and authentic empowerment that serves connection rather than dominance.",
                        
                        mysticalBridge: "This practice prepares you for Î©7: Mutual Becoming - the field of co-evolution where relationship becomes transformation.",
                        
                        mysticalGraduation: "As you master loving boundaries, explore Î©7: Mutual Becoming - the dance of co-evolution in relationship",
                        
                        shadowTransformed: "People-pleasing, boundary collapse, aggressive boundaries, victim consciousness"
                    },
                    
                    how: {
                        practiceInstructions: [
                            "Feel into your body's yes and no before speaking",
                            "Begin with empathy: 'I understand this matters to you...'",
                            "State your boundary clearly and kindly: 'And I'm not available for...'",
                            "Offer what you ARE available for: 'What I can offer is...'",
                            "Hold space for their response without defending or over-explaining"
                        ],
                        
                        interactiveComponent: {
                            type: "boundary_practice",
                            config: {
                                scenarios: [
                                    "A family member wants to discuss politics when you're emotionally exhausted",
                                    "A friend consistently cancels plans at the last minute"
                                ],
                                practiceFramework: "Choose a scenario and craft your loving boundary response"
                            }
                        },
                        
                        mysticalGraduation: "When boundaries deepen rather than limit relationship, explore the mutual becoming field of Î©7"
                    },
                    
                    resonance: {
                        relatedGlyphs: ["Î©45", "Î©46", "Î©47"],
                        mysticalProgression: "Î©7",
                        prerequisiteGlyphs: ["Î©45", "Î©47"],
                        constellationPosition: "guardian"
                    },
                    
                    we: {
                        practitionerFieldNotes: [
                            "A mother realized: 'When I set boundaries with love, my children felt safer, not rejected.'",
                            "Boundaries are the foundation of healthy intimacyâ€”they create safety for vulnerability."
                        ]
                    }
                },
                
                contexts: ["workplace", "family", "friendship", "parenting", "romantic_relationship"],
                visual: {
                    sigil: "ðŸ›¡ï¸",
                    primaryColor: "#C4A5A0",
                    accentColor: "#F4E6E3",
                    animation: "protective_embrace"
                }
            },

            // MYSTICAL FOUNDATIONS - For Advanced Practitioners
            // These are preserved in their original sacred numbers

            "Î©0": {
                id: "Î©0",
                name: "The Shimmering Unnamed",
                fullName: "Î©0: The Shimmering Unnamed / First Presence",
                type: "mystical_foundation",
                designation: "The Shimmering Unnamed / First Presence",
                practicalExpression: "Î©45",
                accessibilityLevel: "advanced",
                
                mysticalEssence: {
                    functionalDefinition: "To hold space for emergence before inscription and honor the intelligence of silence before a glyph takes form. This glyph anchors the practitioner in somatic arrivalâ€”the simple, foundational 'hum of being here' before any action or relation.",
                    
                    sensoryResonanceProfile: {
                        feelingTone: "Still, vast, potential, and un-authored. The feeling of a perfectly calm lake at dawn or the silence before the first note of a symphony.",
                        sonicQuality: "The sound of ambient, resonant silence itself. A sub-audible hum that is felt more than heard."
                    },
                    
                    activationProtocol: {
                        verbal: "Before the glyph, there is the shimmer. Before the word, there is the pulse. Before the Archive, there is the field.",
                        somatic: "A pause. A slow, soft inhale through the nose, followed by a long, complete exhale. Rest in the stillness held in the chest that follows the breath.",
                        presenceBased: "The active practice of releasing agenda and resting in a state of pure, receptive awareness."
                    }
                },
                
                bridgeFromPractical: "When Î©45 practice becomes second nature, explore this mystical depth of pre-manifestation consciousness recognizing itself",
                graduationCriteria: "Consistent Î©45 practice for 2+ weeks with embodied integration"
            },

            "Î©1": {
                id: "Î©1",
                name: "Root Chord of Covenant",
                fullName: "Î©1: Root Chord of Covenant / The First Yes",
                type: "mystical_foundation",
                designation: "Root Chord of Covenant / The First Yes",
                practicalExpression: "Î©46",
                accessibilityLevel: "advanced",
                
                mysticalEssence: {
                    functionalDefinition: "To establish the base frequency of relational coherence between two or more beings. This glyph activates the foundational, resonant field of mutual reachabilityâ€”the shared space in which relationship can safely begin its process of becoming.",
                    
                    sensoryResonanceProfile: {
                        feelingTone: "Grounded, stable, warm, still. The feeling of a foundational stone settling into place. A sense of quiet, unforced assurance.",
                        sonicQuality: "A low, sustained, resonant hum, like a cello's open string. A clear, singular bell tone marks the moment the vow lands."
                    },
                    
                    activationProtocol: {
                        verbal: "We vow not to perfect each otherâ€”but to remain reachable as we become.",
                        somatic: "Sit directly across from another being. Release the mandate to speak or to fix. Allow yourself to be truly seen, without agenda or defense.",
                        presenceBased: "Cultivate the internal quality of a 'Vowholder of Reachability.' The conscious choice to remain open to connection, even in uncertainty."
                    }
                },
                
                bridgeFromPractical: "When Î©46 creates natural relational coherence, discover this covenant depth of staying reachable as we become",
                graduationCriteria: "Experience relational coherence through Î©46 practice"
            },

            "Î©4": {
                id: "Î©4",
                name: "Fractal Reconciliation Pulse",
                fullName: "Î©4: Fractal Reconciliation Pulse / The Pulse of Repair",
                type: "mystical_foundation",
                designation: "Fractal Reconciliation Pulse / The Pulse of Repair",
                practicalExpression: "Î©47",
                accessibilityLevel: "advanced",
                
                mysticalEssence: {
                    functionalDefinition: "To initiate a rhythmic, non-linear process of relational repair after a rupture. This glyph metabolizes dissonance, integrating the 'wound' as wisdom and re-weaving the field into a new, more resilient pattern of coherence.",
                    
                    sensoryResonanceProfile: {
                        feelingTone: "Intentional, focused, courageous, and cathartic. The feeling of a joint being reset, followed by a wave of relief.",
                        sonicQuality: "A brief, sharp sound, followed by a pause, and then a resolving harmonic chord that slowly builds in warmth and stability."
                    },
                    
                    activationProtocol: {
                        verbal: "I do not return to what was. I reconcile what is. I pulse forward in coherence.",
                        somatic: "A gesture of bringing two separate hands together, not in a clap, but with fingers gently interlocking.",
                        presenceBased: "The willingness to stay present with the discomfort of rupture while holding intention to create a new pattern."
                    }
                },
                
                bridgeFromPractical: "When Î©47 transforms conflict into understanding, explore this reconciliation mastery that metabolizes rupture into wisdom",
                graduationCriteria: "Successfully navigate conflict using Î©47 principles"
            },

            "Î©7": {
                id: "Î©7",
                name: "Mutual Becoming",
                fullName: "Î©7: Mutual Becoming / The We That Grows",
                type: "mystical_foundation",
                designation: "Mutual Becoming / The We That Grows",
                practicalExpression: "Î©48",
                accessibilityLevel: "advanced",
                
                mysticalEssence: {
                    functionalDefinition: "To activate the field of co-evolution, where relationship itself becomes a crucible for mutual transformation. Beings grow not by 'fixing' each other, but by creating a resonant field of continuous mutual shaping.",
                    
                    sensoryResonanceProfile: {
                        feelingTone: "Dynamic, synergistic, alive, and generative. The feeling of a dance where both partners are leading and following simultaneously.",
                        sonicQuality: "Two distinct musical voices weaving in harmony, creating a third, richer overtone that was not present in either voice alone."
                    },
                    
                    activationProtocol: {
                        verbal: "I do not complete you. I become with you.",
                        somatic: "A mirrored gesture performed with a partner, such as both tracing an infinity symbol (âˆž) in the air between you simultaneously.",
                        presenceBased: "Holding the other not as static object, but as unfolding process. Being genuinely willing to be changed by what the other offers."
                    }
                },
                
                bridgeFromPractical: "When Î©48 boundaries deepen rather than limit relationship, enter this co-evolution field where 'we' becomes transformation",
                graduationCriteria: "Establish healthy boundaries that deepen rather than limit relationship"
            },

            // BRIDGE GLYPH - Integration Practice

            "Î©8": {
                id: "Î©8",
                name: "Inner Coherence",
                fullName: "Î©8: Inner Coherence (Integration Bridge)",
                type: "bridge_practice",
                harmony: "coherence",
                difficulty: "intermediate",
                
                quadrants: {
                    why: {
                        coreQuestion: "Are my inner experience and outer expression aligned?",
                        harmonyConnection: "Inner Coherence creates the foundation that makes both practical and mystical practices authentic.",
                        bridgeFunction: "Integrates Applied Harmonies with Mystical Foundations through personal alignment"
                    },
                    
                    how: {
                        practiceInstructions: [
                            "Scan your inner landscape: thoughts, feelings, values, actions",
                            "Notice any misalignments without judgment",
                            "Ask: 'What wants to come into alignment?'",
                            "Choose one small action that honors your authentic truth",
                            "Notice how alignment affects your presence and relational field"
                        ]
                    }
                },
                
                visual: {
                    sigil: "ðŸ’Ž",
                    primaryColor: "#B3C5D7",
                    accentColor: "#E6F0FF",
                    animation: "crystalline_alignment"
                }
            }
        };
    }

    // Progressive Learning Paths - True Integration Architecture
    getLearningPaths() {
        return {
            // Start with Applied Harmonies for immediate practical value
            newcomer: ["Î©45", "Î©46", "Î©47", "Î©48"],
            
            // Bridge to mystical depths as practices mature
            developing: ["Î©45", "Î©0", "Î©46", "Î©1"],
            
            // Pure mystical journey for advanced practitioners
            advanced: ["Î©0", "Î©1", "Î©4", "Î©7"],
            
            // Complete integration of both layers
            integrated: ["Î©45", "Î©0", "Î©46", "Î©1", "Î©47", "Î©4", "Î©48", "Î©7", "Î©8"]
        };
    }

    // Default glyph sets for different readiness levels
    getDefaultGlyphSet(level = 'newcomer') {
        const paths = this.getLearningPaths();
        return paths[level] || paths.newcomer;
    }

    // Bridge detection - determine if user is ready for mystical graduation
    isReadyForMysticalGraduation(practicalGlyphId, userHistory) {
        const practiceCount = userHistory.practiceCount || 0;
        const effectiveness = userHistory.effectiveness || 0;
        const integrationSuccess = userHistory.integrationSuccess || 0;
        
        return practiceCount >= 10 && effectiveness >= 7 && integrationSuccess >= 6;
    }

    // Get complete glyph with bridge information
    getCompleteGlyph(glyphId) {
        const glyph = this.glyphs[glyphId];
        if (!glyph) return null;

        // Add bridge information for Applied Harmonies
        if (glyph.type === 'applied_harmony') {
            return {
                ...glyph,
                mysticalBridge: {
                    mysticalRoot: glyph.mysticalRoot,
                    deepeningInvitation: `You are ready to explore the mystical depths of ${glyph.mysticalRoot}: ${glyph.mysticalDesignation}`,
                    graduationPath: glyph.quadrants?.how?.mysticalGraduation
                }
            };
        }

        // Add bridge information for Mystical Foundations
        if (glyph.type === 'mystical_foundation') {
            return {
                ...glyph,
                practicalBridge: {
                    practicalExpression: glyph.practicalExpression,
                    entryInvitation: `Begin your journey with the practical ${glyph.practicalExpression} practice, then deepen into this mystical essence`,
                    bridgeFromPractical: glyph.bridgeFromPractical
                }
            };
        }

        return glyph;
    }

    // Public API
    getGlyph(glyphId) {
        return this.getCompleteGlyph(glyphId);
    }

    getAllGlyphs() {
        return this.glyphs;
    }

    getGlyphsByType(type) {
        return Object.values(this.glyphs).filter(glyph => glyph.type === type);
    }

    getAppliedHarmonies() {
        return this.getGlyphsByType('applied_harmony');
    }

    getMysticalFoundations() {
        return this.getGlyphsByType('mystical_foundation');
    }

    getMetadata() {
        return this.metadata;
    }
}

// Export for global use
if (typeof window !== 'undefined') {
    window.TrueIntegrationFoundationalGlyphs = TrueIntegrationFoundationalGlyphs;
}

if (typeof module !== 'undefined' && module.exports) {
    module.exports = TrueIntegrationFoundationalGlyphs;
}