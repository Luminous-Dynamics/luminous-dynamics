/**
 * Emerging Star Practices - The Second Constellation
 * 
 * Practice flows for stars *12-*18 that address integration work:
 * shadow, grief, joy, and the deeper patterns of relating.
 */

class EmergingStarPractices {
    constructor() {
        this.practices = this.initializeEmergingPractices();
    }

    initializeEmergingPractices() {
        return {
            "*12": { // Process Grace
                id: "*12",
                name: "Process Grace",
                bridge: "Ω8: Grace of Unfinishedness",
                duration: 6, // minutes
                coreQuestion: "Can I love what's incomplete, including myself?",
                quantumEffect: "Dissolves perfectionism patterns across all timelines",
                fieldBoost: 1.3,
                
                steps: [
                    {
                        title: "Acknowledging the Unfinished",
                        duration: 90,
                        type: "awareness",
                        instruction: "Bring to mind something unfinished - a project, a conversation, a healing process",
                        guidance: "Notice any tension, shame, or urgency around this incompletion. Just notice with kindness."
                    },
                    {
                        title: "Somatic Release",
                        duration: 60,
                        type: "somatic",
                        instruction: "Consciously release physical tension - unclench your jaw, drop your shoulders, open your hands",
                        guidance: "Let your body show you what it's like to not need to be finished. Feel the relief."
                    },
                    {
                        title: "Breathing the Process",
                        duration: 90,
                        type: "breathing",
                        instruction: "Breathe with the rhythm of becoming - no rush, no destination",
                        breathPattern: { inhale: 4, hold: 2, exhale: 6, cycles: 5 },
                        guidance: "Each breath is complete in itself, yet part of an endless process"
                    },
                    {
                        title: "Compassion for Becoming",
                        duration: 90,
                        type: "heart",
                        instruction: "Place your hand on your heart and offer compassion to all your unfinished parts",
                        guidance: "Say inwardly: 'I do not need to be finished to be whole. I am becoming, and that is enough.'"
                    },
                    {
                        title: "Integration",
                        duration: 90,
                        type: "integration",
                        instruction: "Return to the unfinished thing you brought to mind. How does it feel now?",
                        guidance: "Notice any shift in your relationship to incompletion. Carry this grace forward."
                    }
                ]
            },

            "*13": { // Sacred Exchange
                id: "*13",
                name: "Sacred Exchange",
                bridge: "Ω32: Attuned Reciprocity / The Debtless Flow",
                duration: 7, // minutes
                coreQuestion: "Can I give and receive without keeping score?",
                quantumEffect: "Activates the unified field of giving-receiving as one motion",
                fieldBoost: 1.5,
                
                steps: [
                    {
                        title: "The Inner Ledger",
                        duration: 90,
                        type: "awareness",
                        instruction: "Notice where you keep score in relationships - who 'owes' whom",
                        guidance: "Without judgment, just notice the subtle accounting. Feel its weight."
                    },
                    {
                        title: "Releasing the Tally",
                        duration: 90,
                        type: "release",
                        instruction: "Imagine erasing all the scorecards, all the tallies, all the debts",
                        guidance: "What would it feel like to start fresh, with no one owing anyone anything?"
                    },
                    {
                        title: "Flow Practice",
                        duration: 90,
                        type: "somatic",
                        instruction: "Make a flowing gesture - receive with one hand, give with the other, continuously",
                        guidance: "Feel how giving and receiving are one motion, one flow, one dance"
                    },
                    {
                        title: "Breathing Exchange",
                        duration: 90,
                        type: "breathing",
                        instruction: "Breathe as sacred exchange - receiving life, giving gratitude",
                        breathPattern: { inhale: 5, hold: 0, exhale: 5, cycles: 6 },
                        guidance: "Each inhale receives the gift of life, each exhale gives thanks"
                    },
                    {
                        title: "Heart of Generosity",
                        duration: 90,
                        type: "heart",
                        instruction: "Feel into your natural generosity - the joy of giving without calculation",
                        guidance: "Remember a time you gave purely from love. Let that feeling fill you."
                    },
                    {
                        title: "Debtless Presence",
                        duration: 120,
                        type: "integration",
                        instruction: "Rest in the space of debtless flow - nothing owed, nothing lacking",
                        guidance: "Say inwardly: 'I do not give to receive. I give to flow. I receive to flow.'"
                    }
                ]
            },

            "*14": { // Grief Honoring
                id: "*14",
                name: "Grief Honoring",
                bridge: "Ω32: Grief Tending",
                duration: 8, // minutes
                coreQuestion: "Can I let loss transform me without destroying me?",
                quantumEffect: "Opens sacred portals for grief to move and transform",
                fieldBoost: 1.4,
                
                steps: [
                    {
                        title: "Touching the Edge",
                        duration: 90,
                        type: "gentle_awareness",
                        instruction: "Gently touch the edge of a loss - don't dive in, just acknowledge",
                        guidance: "Like touching a tender bruise with infinite gentleness. You are safe."
                    },
                    {
                        title: "Creating Sacred Space",
                        duration: 90,
                        type: "container",
                        instruction: "Imagine creating a beautiful container to hold your grief",
                        guidance: "This container is strong enough to hold it all, beautiful enough to honor what was lost"
                    },
                    {
                        title: "Breath of Allowing",
                        duration: 120,
                        type: "breathing",
                        instruction: "Breathe to create space for grief to move",
                        breathPattern: { inhale: 4, hold: 2, exhale: 8, cycles: 6 },
                        guidance: "Long exhales help grief flow. Let it move like water."
                    },
                    {
                        title: "Honoring What Was",
                        duration: 120,
                        type: "honoring",
                        instruction: "Take a moment to honor what was lost - its gifts, its beauty",
                        guidance: "Gratitude and grief can exist together. Let them dance."
                    },
                    {
                        title: "Transformation Gateway",
                        duration: 90,
                        type: "alchemy",
                        instruction: "Feel how grief is love with nowhere to go - let it transform",
                        guidance: "Grief can become compassion, wisdom, deeper capacity to love"
                    },
                    {
                        title: "Return to Life",
                        duration: 120,
                        type: "integration",
                        instruction: "Gently return, carrying the gifts of your grief work",
                        guidance: "You have honored loss. Now let life call you forward, transformed."
                    }
                ]
            },

            "*15": { // Joy Embodiment
                id: "*15",
                name: "Joy Embodiment",
                bridge: "Ω33: Joy Cultivation",
                duration: 6, // minutes
                coreQuestion: "Can I let joy live fully in my body?",
                quantumEffect: "Amplifies joy fractally across all dimensions of being",
                fieldBoost: 1.6,
                
                steps: [
                    {
                        title: "Joy Reconnaissance",
                        duration: 60,
                        type: "awareness",
                        instruction: "Scan your body for even the tiniest spark of joy or pleasure",
                        guidance: "It might be subtle - warmth, tingling, lightness. Joy is always somewhere."
                    },
                    {
                        title: "Amplification Breath",
                        duration: 90,
                        type: "breathing",
                        instruction: "Breathe to amplify the joy sensation",
                        breathPattern: { inhale: 4, hold: 4, exhale: 4, cycles: 5 },
                        guidance: "Imagine breathing directly into the joy, helping it expand"
                    },
                    {
                        title: "Joy Movement",
                        duration: 90,
                        type: "somatic",
                        instruction: "Let joy move your body - wiggle, sway, dance, stretch",
                        guidance: "Don't think, just let joy choreograph your movement"
                    },
                    {
                        title: "Celebration Practice",
                        duration: 90,
                        type: "expression",
                        instruction: "Practice celebrating - smile, laugh, make joy sounds",
                        guidance: "Even if it feels awkward, let your body remember how to celebrate"
                    },
                    {
                        title: "Joy Transmission",
                        duration: 90,
                        type: "energetic",
                        instruction: "Feel joy radiating from you, blessing everything it touches",
                        guidance: "Joy shared is joy multiplied. Let it overflow."
                    }
                ]
            },

            "*16": { // Curious Questions
                id: "*16",
                name: "Curious Questions",
                bridge: "Ω19: Sacred Questions",
                duration: 7, // minutes
                coreQuestion: "Can my questions open new worlds?",
                quantumEffect: "Opens portals of possibility through sacred inquiry",
                fieldBoost: 1.4,
                
                steps: [
                    {
                        title: "Question Inventory",
                        duration: 90,
                        type: "awareness",
                        instruction: "Notice what questions live in you right now - about yourself, others, life",
                        guidance: "Which questions feel alive? Which feel like weapons? Which open doors?"
                    },
                    {
                        title: "From Judgment to Wonder",
                        duration: 90,
                        type: "alchemy",
                        instruction: "Take a judgment you hold and transform it into a curious question",
                        guidance: "Instead of 'Why are they so...' try 'I wonder what they're experiencing...'"
                    },
                    {
                        title: "Breathing Questions",
                        duration: 90,
                        type: "breathing",
                        instruction: "Breathe your questions - inhale wonder, exhale openness",
                        breathPattern: { inhale: 5, hold: 2, exhale: 5, cycles: 5 },
                        guidance: "Let each breath soften the edges of what you think you know"
                    },
                    {
                        title: "Sacred Inquiry Practice",
                        duration: 120,
                        type: "practice",
                        instruction: "Ask yourself a tender question and listen with your whole being",
                        guidance: "Try: 'What am I not seeing?' or 'What wants to emerge?' Listen beyond words."
                    },
                    {
                        title: "Living the Questions",
                        duration: 120,
                        type: "integration",
                        instruction: "Choose one question to live with today - let it guide your encounters",
                        guidance: "A good question is better than many answers. Let it work on you."
                    }
                ]
            },

            "*17": { // Shadow Dancing
                id: "*17",
                name: "Shadow Dancing",
                bridge: "Ω24: Shadow Welcoming",
                duration: 8, // minutes
                coreQuestion: "Can I dance with what I've rejected in myself?",
                quantumEffect: "Integrates shadow aspects across all dimensions of self",
                fieldBoost: 1.5,
                
                steps: [
                    {
                        title: "Shadow Recognition",
                        duration: 90,
                        type: "gentle_awareness",
                        instruction: "Think of someone who really bothers you - what quality irritates you most?",
                        guidance: "This irritation often points to a disowned part of yourself. Be gentle."
                    },
                    {
                        title: "Finding the Shadow in Self",
                        duration: 90,
                        type: "exploration",
                        instruction: "Ask: Where does this quality live in me, even in tiny ways?",
                        guidance: "It might be well-hidden or appear in different forms. Keep looking with compassion."
                    },
                    {
                        title: "Shadow Breathing",
                        duration: 90,
                        type: "breathing",
                        instruction: "Breathe toward this disowned part - not to fix, but to acknowledge",
                        breathPattern: { inhale: 4, hold: 4, exhale: 6, cycles: 5 },
                        guidance: "Each breath says 'I see you. You belong to me too.'"
                    },
                    {
                        title: "Dance of Integration",
                        duration: 120,
                        type: "somatic",
                        instruction: "Move your body to express both the rejection and the acceptance",
                        guidance: "Let your body show the push away, then the drawing close. Find the dance between."
                    },
                    {
                        title: "Shadow Gifts",
                        duration: 90,
                        type: "alchemy",
                        instruction: "Ask: What gift might this shadow quality have for me?",
                        guidance: "Every shadow contains medicine. What strength hides in what you've rejected?"
                    },
                    {
                        title: "Integration Blessing",
                        duration: 120,
                        type: "integration",
                        instruction: "Offer a blessing to this part of yourself - welcome it home",
                        guidance: "Say inwardly: 'You are part of me. I reclaim you with love.'"
                    }
                ]
            },

            "*18": { // Conflict Alchemy
                id: "*18",
                name: "Conflict Alchemy",
                bridge: "Ω21: Conflict as Sacred Teacher",
                duration: 7, // minutes
                coreQuestion: "Can conflict become a doorway to deeper intimacy?",
                quantumEffect: "Transforms discord into evolutionary catalyst across relationships",
                fieldBoost: 1.6,
                
                steps: [
                    {
                        title: "Conflict Presence",
                        duration: 90,
                        type: "awareness",
                        instruction: "Bring to mind a current or recent conflict - feel it in your body",
                        guidance: "Notice: Where does it live? Chest? Stomach? Throat? Just notice."
                    },
                    {
                        title: "The Sacred Disagreement",
                        duration: 90,
                        type: "reframe",
                        instruction: "See the conflict as two truths trying to meet, not one right vs one wrong",
                        guidance: "What if both perspectives hold something sacred? What wants to be born here?"
                    },
                    {
                        title: "Conflict Breathing",
                        duration: 90,
                        type: "breathing",
                        instruction: "Breathe space around the conflict - let it have room to transform",
                        breathPattern: { inhale: 4, hold: 2, exhale: 8, cycles: 5 },
                        guidance: "Long exhales release the need to be right. Space allows new possibilities."
                    },
                    {
                        title: "Finding the Gift",
                        duration: 120,
                        type: "exploration",
                        instruction: "Ask: What is this conflict trying to teach us? What wants to evolve?",
                        guidance: "Look beyond positions to needs. What deeper truth is struggling to emerge?"
                    },
                    {
                        title: "Bridge Building",
                        duration: 90,
                        type: "heart",
                        instruction: "Imagine building a bridge between the two positions - what would it look like?",
                        guidance: "The bridge honors both truths. It's not compromise but creative emergence."
                    },
                    {
                        title: "Conflict as Evolution",
                        duration: 120,
                        type: "integration",
                        instruction: "Thank the conflict for its teaching - commit to staying present next time",
                        guidance: "Say inwardly: 'I welcome conflict as sacred teacher. Through it, we grow.'"
                    }
                ]
            }
        };
    }

    // Get practice by star ID
    getPractice(starId) {
        return this.practices[starId];
    }

    // Get all emerging practices
    getAllPractices() {
        return Object.values(this.practices);
    }

    // Check if practice exists
    hasPractice(starId) {
        return !!this.practices[starId];
    }

    // Get practices for specific wave
    getSecondWavePractices() {
        return ["*12", "*13", "*14", "*15"].map(id => this.practices[id]).filter(p => p);
    }

    // Get all second constellation practices
    getSecondConstellationPractices() {
        return ["*12", "*13", "*14", "*15", "*16", "*17", "*18"]
            .map(id => this.practices[id])
            .filter(p => p);
    }
    
    // Check if all practices are complete
    areAllPracticesComplete() {
        return this.getSecondConstellationPractices().length === 7;
    }
}

// Export for use
if (typeof window !== 'undefined') {
    window.EmergingStarPractices = EmergingStarPractices;
}

if (typeof module !== 'undefined' && module.exports) {
    module.exports = EmergingStarPractices;
}

export default EmergingStarPractices;